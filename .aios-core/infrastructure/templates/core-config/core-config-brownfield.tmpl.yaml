# AIOS Core Configuration
# Generated by AIOS Documentation Integrity System
# Mode: Brownfield (Existing Project Integration)
# Date: {{GENERATED_DATE}}
#
# NOTE: This is a template file (.tmpl.yaml) - not raw YAML.
# Placeholders are processed by the documentation-integrity generator.

# =============================================================================
# PROJECT CONFIGURATION
# =============================================================================
project:
  type: USER_PROJECT
  mode: brownfield
  name: "{{PROJECT_NAME}}"
  analyzed: "{{GENERATED_DATE}}"
  version: "{{PROJECT_VERSION}}"

  # Analysis metadata from brownfield analyzer
  analysis:
    existing_structure: {{HAS_EXISTING_STRUCTURE}}
    existing_workflows: {{HAS_EXISTING_WORKFLOWS}}
    existing_standards: {{HAS_EXISTING_STANDARDS}}
    merge_strategy: "{{MERGE_STRATEGY}}"  # parallel | replace | manual

    # Detected configurations (for reference)
    detected:
      tech_stack: {{DETECTED_TECH_STACK}}
      frameworks: {{DETECTED_FRAMEWORKS}}
      linting: {{DETECTED_LINTING}}
      formatting: {{DETECTED_FORMATTING}}
      testing: {{DETECTED_TESTING}}

# =============================================================================
# DEV CONTEXT LOADING
# Files loaded automatically when @dev agent activates
# =============================================================================
devLoadAlwaysFiles:
  - docs/architecture/coding-standards.md
  - docs/architecture/tech-stack.md
  - docs/architecture/source-tree.md

# =============================================================================
# DEPLOYMENT CONFIGURATION
# All @devops agent tasks read from this section
# Analyzed from existing workflows + user confirmation
# =============================================================================
deployment:
  # Workflow type (detected or user-selected)
  workflow: {{DEPLOYMENT_WORKFLOW}}

  # Branch routing configuration (analyzed from existing PR patterns)
  branches:
    staging_targets:
      - "feature/*"
      - "fix/*"
      - "docs/*"
      - "chore/*"
      - "refactor/*"
      - "test/*"

    production_targets:
      - "hotfix/*"

    # Detected branch names (may differ from defaults)
    staging_branch: {{STAGING_BRANCH}}
    production_branch: {{PRODUCTION_BRANCH}}
    default_target: {{DEFAULT_TARGET}}

  # Environment configuration (detected from existing deploy configs)
  environments:
    staging:
      name: "{{STAGING_ENV_NAME}}"
      branch: {{STAGING_BRANCH}}
      auto_deploy: {{STAGING_AUTO_DEPLOY}}
      platform: "{{DEPLOYMENT_PLATFORM}}"
      url: "${STAGING_URL}"
      promotion_message: "After validation, create PR to {{PRODUCTION_BRANCH}} for production"

    production:
      name: "{{PRODUCTION_ENV_NAME}}"
      branch: {{PRODUCTION_BRANCH}}
      auto_deploy: {{PRODUCTION_AUTO_DEPLOY}}
      platform: "{{DEPLOYMENT_PLATFORM}}"
      url: "${PRODUCTION_URL}"
      promotion_message: "This is the final production deployment"

  # Quality gates (detected from existing CI)
  quality_gates:
    lint: {{QUALITY_LINT}}
    typecheck: {{QUALITY_TYPECHECK}}
    tests: {{QUALITY_TESTS}}
    security_scan: {{QUALITY_SECURITY}}
    min_coverage: {{MIN_COVERAGE}}

  # PR defaults
  pr_defaults:
    auto_assign_reviewers: {{AUTO_ASSIGN_REVIEWERS}}
    draft_by_default: {{DRAFT_BY_DEFAULT}}
    include_deployment_info: true

# =============================================================================
# EXISTING CONFIGURATION PRESERVATION
# References to existing config files that should be respected
# =============================================================================
existing_configs:
  # Linting/Formatting (don't override these)
  eslint: {{ESLINT_CONFIG_PATH}}
  prettier: {{PRETTIER_CONFIG_PATH}}
  tsconfig: {{TSCONFIG_PATH}}
  flake8: {{FLAKE8_CONFIG_PATH}}

  # CI/CD (may need merge)
  github_workflows: {{GITHUB_WORKFLOWS_PATH}}
  gitlab_ci: {{GITLAB_CI_PATH}}

  # Package management
  package_json: {{PACKAGE_JSON_PATH}}
  requirements_txt: {{REQUIREMENTS_PATH}}
  go_mod: {{GO_MOD_PATH}}

# =============================================================================
# AGENT CONFIGURATION
# =============================================================================
agents:
  dev:
    auto_load_context: true
    story_tracking: true
    respect_existing_standards: true

  qa:
    run_on_pr: true
    coverage_threshold: {{MIN_COVERAGE}}

  devops:
    auto_detect_workflow: true
    merge_with_existing: {{MERGE_WORKFLOWS}}

# =============================================================================
# FEATURES
# =============================================================================
features:
  documentation_integrity: true
  source_tree_guardian: true
  quality_metrics: true

  documentation_integrity_options:
    generate_source_tree: true
    generate_coding_standards: true
    generate_tech_stack: true
    brownfield_analysis: true
    gitignore_generation: true
    merge_gitignore: true  # Merge with existing instead of replace

# =============================================================================
# MIGRATION NOTES
# Auto-generated notes from brownfield analysis
# =============================================================================
migration_notes:
  # Summary of what was detected vs generated
  summary: "{{MIGRATION_SUMMARY}}"

  # Items requiring manual review
  manual_review_items: {{MANUAL_REVIEW_ITEMS_YAML}}

  # Potential conflicts detected
  conflicts: {{CONFLICTS_YAML}}

  # Recommendations
  recommendations: {{RECOMMENDATIONS_YAML}}

# =============================================================================
# CUSTOM CONFIGURATION
# Project-specific settings
# =============================================================================
custom: {}
